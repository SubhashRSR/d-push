'use strict';function a0_0x55cd(){const _0x45e9cb=['ethods/htt','config','aYqDM','Processing','okensFromT','REDIS_HOST','s/import','iZzmQ','Error\x20in\x20R','opics','sendPushTo','ion','Unhandled\x20','Error\x20in\x20I','ExtraWorke','ioredis','Worker\x20Err','Worker','REDIS_PORT','3388835RnSwlW','754146jswnBO','s/cleanupM','6379','ctive_work','\x20completed','igration','AdzOu','UpIkD','test','default','om_topics','s/migratio','_topics','[Worker]:\x20','ionPush','rename_dom','\x20job\x20','env','dding\x20Toke','now','nMethods/s','s/importEx','cleanupTok','ARjkL','kens','./function','\x20in\x20','remove_all','10923291gvAzAy','portMethod','endPushToM','CxaYk','name','a\x20Worker\x20i','import_tok','_tokens_fr','ens','ain_tag_to','./helpers','igrated\x20Se','kens_to_to','REDIS_PASS','importToke','zykmU','ndPush','A\x20New\x20Extr','71477JVMVMN','./test','job\x20type','/../.env','at\x20','oFTjr','ics','pics','./utils/sq','erty','Queue','addAllToke','ensHttpv1','exportToke','inTagToTop','data','SendMigrat','catch','toISOStrin','active_ina','bullmq','renameDoma','dotenv','nsToTopics','Error\x20in\x20E','l_utils','s/export','onMethods/','RIFNI','334156nTbQBZ','xportToken','__esModule','Job\x20','lOEty','IPepk','removeAllT','Error\x20in\x20A','Migration','emoving\x20To','eBNSj','2223712JkyzLj','add_all_to','PQWHl','Error\x20in\x20M','__importDe','\x20of\x20type\x20','Error\x20in\x20C','migrated_n','otificatio','xtraWorker','log','getConnect','error','s\x20Spawned\x20','mportToken','fault','pv1','export_tok','WORD','wxejH','3mBFPNa','leaning\x20To','clean_toke','182150aMkCdH','s/submissi','wwRtv','rQueue','320pjjHHU','defineProp'];a0_0x55cd=function(){return _0x45e9cb;};return a0_0x55cd();}const a0_0x16a558=a0_0x4fa0;(function(_0x2120c6,_0x59eef4){const _0x459754=a0_0x4fa0;const _0x12f668=_0x2120c6();while(!![]){try{const _0x2af05c=-parseInt(_0x459754(0x241))/(-0x1fc4+0x21fa*-0x1+0x41bf)+-parseInt(_0x459754(0x263))/(-0x1183+0xd*0x2b+0xf56)+-parseInt(_0x459754(0x260))/(0xdbd+0x6*-0x4fa+0x1022)*(-parseInt(_0x459754(0x24c))/(0xf08+-0x194c+0x178*0x7))+-parseInt(_0x459754(0x1f5))/(0x325*-0x7+-0x377+0x3d*0x6b)+parseInt(_0x459754(0x1f6))/(-0x1*-0x1a1b+0x10f5+-0x7*0x626)+parseInt(_0x459754(0x224))/(0xc56+0x1*0x264e+0x1*-0x329d)*(-parseInt(_0x459754(0x267))/(0x7fa*-0x3+0x4*0x142+0x12ee))+parseInt(_0x459754(0x212))/(-0x1*0x1ea2+0x1*0x1669+0x842*0x1);if(_0x2af05c===_0x59eef4){break;}else{_0x12f668['push'](_0x12f668['shift']());}}catch(_0x52250f){_0x12f668['push'](_0x12f668['shift']());}}}(a0_0x55cd,0xd4*0xa96+-0x25*-0x1693+-0x1d*0x367b));var __importDefault=this&&this[a0_0x16a558(0x250)+a0_0x16a558(0x25b)]||function(_0x34891d){const _0x26e145=a0_0x16a558;return _0x34891d&&_0x34891d[_0x26e145(0x243)]?_0x34891d:{'default':_0x34891d};};Object[a0_0x16a558(0x268)+a0_0x16a558(0x22d)](exports,a0_0x16a558(0x243),{'value':!![]});const dotenv_1=__importDefault(require(a0_0x16a558(0x23a)));const helpers_1=require(a0_0x16a558(0x21c));dotenv_1[a0_0x16a558(0x1ff)][a0_0x16a558(0x26a)]({'path':__dirname+a0_0x16a558(0x227)});function a0_0x4fa0(_0x43ae0f,_0x286cdf){const _0x55a17f=a0_0x55cd();a0_0x4fa0=function(_0x326211,_0x10ec4){_0x326211=_0x326211-(0x1ca*0x8+0x1e84+-0x2ae0);let _0x48d71c=_0x55a17f[_0x326211];return _0x48d71c;};return a0_0x4fa0(_0x43ae0f,_0x286cdf);}const ioredis_1=__importDefault(require(a0_0x16a558(0x278)));const sql_utils_1=__importDefault(require(a0_0x16a558(0x22c)+a0_0x16a558(0x23d)));const bullmq_1=require(a0_0x16a558(0x238));const import_1=require(a0_0x16a558(0x20f)+a0_0x16a558(0x20b)+a0_0x16a558(0x213)+a0_0x16a558(0x26f));const export_1=require(a0_0x16a558(0x20f)+a0_0x16a558(0x20b)+a0_0x16a558(0x213)+a0_0x16a558(0x23e));const httpv1_1=require(a0_0x16a558(0x20f)+a0_0x16a558(0x1f7)+a0_0x16a558(0x269)+a0_0x16a558(0x25c));const addAllTokensToTopics_1=require(a0_0x16a558(0x20f)+a0_0x16a558(0x264)+a0_0x16a558(0x23f)+a0_0x16a558(0x22f)+a0_0x16a558(0x23b));const removeAllTokensFromTopics_1=require(a0_0x16a558(0x20f)+a0_0x16a558(0x264)+a0_0x16a558(0x23f)+a0_0x16a558(0x247)+a0_0x16a558(0x26d)+a0_0x16a558(0x272));const renameDomainTagToTopics_1=require(a0_0x16a558(0x20f)+a0_0x16a558(0x264)+a0_0x16a558(0x23f)+a0_0x16a558(0x239)+a0_0x16a558(0x232)+a0_0x16a558(0x22a));const sendPushToMigration_1=require(a0_0x16a558(0x20f)+a0_0x16a558(0x201)+a0_0x16a558(0x20a)+a0_0x16a558(0x214)+a0_0x16a558(0x1fb));const test_1=require(a0_0x16a558(0x225));const redis_connection=new ioredis_1[(a0_0x16a558(0x1ff))]({'maxRetriesPerRequest':null,'host':process[a0_0x16a558(0x207)][a0_0x16a558(0x26e)],'port':parseInt(process[a0_0x16a558(0x207)][a0_0x16a558(0x1f4)]||a0_0x16a558(0x1f8)),'password':process[a0_0x16a558(0x207)][a0_0x16a558(0x21f)+a0_0x16a558(0x25e)]});let connection;const migrationWorker=new bullmq_1[(a0_0x16a558(0x27a))](a0_0x16a558(0x234)+a0_0x16a558(0x204),async _0x237f03=>{const _0x5e610e=a0_0x16a558;const _0x179619={'wwRtv':_0x5e610e(0x253)+_0x5e610e(0x254)+'n','aYqDM':_0x5e610e(0x203)+_0x5e610e(0x275)+_0x5e610e(0x226),'RIFNI':function(_0x4fbd8f,_0x1ff9f0){return _0x4fbd8f-_0x1ff9f0;},'eBNSj':_0x5e610e(0x279)+'or'};if(!connection){connection=await sql_utils_1[_0x5e610e(0x1ff)][_0x5e610e(0x257)+_0x5e610e(0x274)]();}try{const _0x2f3f1c=Date[_0x5e610e(0x209)]();(-0x57+-0x13ba+0x1411,helpers_1[_0x5e610e(0x256)])(_0x5e610e(0x26c)+_0x5e610e(0x206)+_0x237f03['id']+_0x5e610e(0x251)+_0x237f03[_0x5e610e(0x216)]);switch(_0x237f03[_0x5e610e(0x216)]){case _0x179619[_0x5e610e(0x265)]:await(0x26c9+0x5*-0x700+-0x3*0x143,sendPushToMigration_1[_0x5e610e(0x273)+_0x5e610e(0x249)])(_0x237f03[_0x5e610e(0x233)],connection,redis_connection)[_0x5e610e(0x235)](_0x5403ef=>(-0x1a87*-0x1+-0x11cf+-0x8b8,helpers_1[_0x5e610e(0x256)])(_0x5e610e(0x203)+_0x5e610e(0x24f)+_0x5e610e(0x21d)+_0x5e610e(0x222),_0x5403ef));break;default:(0x9*0x95+-0x1*-0x2085+-0x25c2,helpers_1[_0x5e610e(0x256)])(_0x179619[_0x5e610e(0x26b)],_0x237f03[_0x5e610e(0x216)]);}console[_0x5e610e(0x256)](_0x5e610e(0x244)+_0x237f03['id']+(_0x5e610e(0x1fa)+_0x5e610e(0x210))+_0x179619[_0x5e610e(0x240)](Date[_0x5e610e(0x209)](),_0x2f3f1c)+'ms');}catch(_0x1a2c8a){console[_0x5e610e(0x258)](_0x179619[_0x5e610e(0x24b)],_0x1a2c8a);}},{'connection':redis_connection});const extraWorkerWorker=new bullmq_1[(a0_0x16a558(0x27a))](a0_0x16a558(0x277)+a0_0x16a558(0x266),async _0x1ee5d2=>{const _0x2d6edc=a0_0x16a558;const _0xdeab9e={'wxejH':_0x2d6edc(0x237)+_0x2d6edc(0x1f9)+'er','iZzmQ':_0x2d6edc(0x218)+_0x2d6edc(0x21a),'oFTjr':_0x2d6edc(0x25d)+_0x2d6edc(0x21a),'UpIkD':_0x2d6edc(0x262)+'n','zykmU':_0x2d6edc(0x24d)+_0x2d6edc(0x21e)+_0x2d6edc(0x22b),'PQWHl':_0x2d6edc(0x211)+_0x2d6edc(0x219)+_0x2d6edc(0x200),'CxaYk':_0x2d6edc(0x205)+_0x2d6edc(0x21b)+_0x2d6edc(0x202),'lOEty':_0x2d6edc(0x1fe),'AdzOu':_0x2d6edc(0x203)+_0x2d6edc(0x275)+_0x2d6edc(0x226),'IPepk':function(_0x4afdc8,_0x111261){return _0x4afdc8-_0x111261;},'ARjkL':_0x2d6edc(0x279)+'or'};try{const _0x35e767=Date[_0x2d6edc(0x209)]();(0x25a5+0x1713+-0x3cb8,helpers_1[_0x2d6edc(0x256)])(_0x2d6edc(0x26c)+_0x2d6edc(0x206)+_0x1ee5d2['id']+_0x2d6edc(0x251)+_0x1ee5d2[_0x2d6edc(0x216)]);if(!connection){connection=await sql_utils_1[_0x2d6edc(0x1ff)][_0x2d6edc(0x257)+_0x2d6edc(0x274)]();}switch(_0x1ee5d2[_0x2d6edc(0x216)]){case _0xdeab9e[_0x2d6edc(0x25f)]:await(0x1aa*0x4+-0x4*0x761+0x1*0x16dc,addAllTokensToTopics_1[_0x2d6edc(0x22f)+_0x2d6edc(0x23b)])(_0x1ee5d2[_0x2d6edc(0x233)],connection,redis_connection)[_0x2d6edc(0x235)](_0x8ee563=>(0x1915+-0x1f23+-0x60e*-0x1,helpers_1[_0x2d6edc(0x256)])(_0x2d6edc(0x203)+_0x2d6edc(0x23c)+_0x2d6edc(0x255)+_0x2d6edc(0x22e),_0x8ee563));break;case _0xdeab9e[_0x2d6edc(0x270)]:await(-0xf*-0x67+0x1f58+0x7*-0x557,import_1[_0x2d6edc(0x220)+'ns'])(_0x1ee5d2[_0x2d6edc(0x233)],connection,redis_connection)[_0x2d6edc(0x235)](_0x45e97a=>(-0x26c3*-0x1+0x4d0+-0x2b93*0x1,helpers_1[_0x2d6edc(0x256)])(_0x2d6edc(0x203)+_0x2d6edc(0x276)+_0x2d6edc(0x25a)+'s',_0x45e97a));break;case _0xdeab9e[_0x2d6edc(0x229)]:await(0x14f3+-0x1001+-0x4f2,export_1[_0x2d6edc(0x231)+'ns'])(_0x1ee5d2[_0x2d6edc(0x233)],connection,redis_connection)[_0x2d6edc(0x235)](_0x456a2=>(-0xb3c+0xb1a*-0x2+0x2170,helpers_1[_0x2d6edc(0x256)])(_0x2d6edc(0x203)+_0x2d6edc(0x23c)+_0x2d6edc(0x242)+'s',_0x456a2));break;case _0xdeab9e[_0x2d6edc(0x1fd)]:await(-0x3*0x25+0x500+-0x491,httpv1_1[_0x2d6edc(0x20c)+_0x2d6edc(0x230)])(_0x1ee5d2[_0x2d6edc(0x233)],connection,redis_connection)[_0x2d6edc(0x235)](_0x4f04b7=>(0x84f*-0x3+-0x1*0x1c94+-0x1*-0x3581,helpers_1[_0x2d6edc(0x256)])(_0x2d6edc(0x203)+_0x2d6edc(0x252)+_0x2d6edc(0x261)+_0x2d6edc(0x20e),_0x4f04b7));break;case _0xdeab9e[_0x2d6edc(0x221)]:await(-0x7*0x4ba+0xb18+0xaff*0x2,addAllTokensToTopics_1[_0x2d6edc(0x22f)+_0x2d6edc(0x23b)])(_0x1ee5d2[_0x2d6edc(0x233)],connection,redis_connection)[_0x2d6edc(0x235)](_0x5a3859=>(-0xa9+0x17cb+-0x3f*0x5e,helpers_1[_0x2d6edc(0x256)])(_0x2d6edc(0x203)+_0x2d6edc(0x248)+_0x2d6edc(0x208)+'ns',_0x5a3859));break;case _0xdeab9e[_0x2d6edc(0x24e)]:await(-0x1b2c+-0xdf9+-0x3*-0xdb7,removeAllTokensFromTopics_1[_0x2d6edc(0x247)+_0x2d6edc(0x26d)+_0x2d6edc(0x272)])(_0x1ee5d2[_0x2d6edc(0x233)],connection,redis_connection)[_0x2d6edc(0x235)](_0x3551b3=>(-0x328*0x9+-0x13cc+0x3034,helpers_1[_0x2d6edc(0x256)])(_0x2d6edc(0x203)+_0x2d6edc(0x271)+_0x2d6edc(0x24a)+_0x2d6edc(0x20e),_0x3551b3));break;case _0xdeab9e[_0x2d6edc(0x215)]:await(0x4a9+-0x2a1*0x3+0x33a,renameDomainTagToTopics_1[_0x2d6edc(0x239)+_0x2d6edc(0x232)+_0x2d6edc(0x22a)])(_0x1ee5d2[_0x2d6edc(0x233)],connection,redis_connection)[_0x2d6edc(0x235)](_0x3c68c5=>(-0x2*-0x430+0x439*0x2+0x1*-0x10d2,helpers_1[_0x2d6edc(0x256)])(_0x2d6edc(0x203)+_0x2d6edc(0x271)+_0x2d6edc(0x24a)+_0x2d6edc(0x20e),_0x3c68c5));break;case _0xdeab9e[_0x2d6edc(0x245)]:await(0x257*0xd+0x6*-0x469+-0x3f5,test_1[_0x2d6edc(0x1fe)])(_0x1ee5d2[_0x2d6edc(0x233)],connection,redis_connection)[_0x2d6edc(0x235)](_0x46266b=>(-0xf99*0x1+-0x65c*-0x6+0x339*-0x7,helpers_1[_0x2d6edc(0x256)])(_0x2d6edc(0x203)+_0x2d6edc(0x271)+_0x2d6edc(0x24a)+_0x2d6edc(0x20e),_0x46266b));break;default:(-0x5*-0x2a1+0xc62+-0x51b*0x5,helpers_1[_0x2d6edc(0x256)])(_0xdeab9e[_0x2d6edc(0x1fc)],_0x1ee5d2[_0x2d6edc(0x216)]);}console[_0x2d6edc(0x256)](_0x2d6edc(0x244)+_0x1ee5d2['id']+(_0x2d6edc(0x1fa)+_0x2d6edc(0x210))+_0xdeab9e[_0x2d6edc(0x246)](Date[_0x2d6edc(0x209)](),_0x35e767)+'ms');}catch(_0x5f1696){console[_0x2d6edc(0x258)](_0xdeab9e[_0x2d6edc(0x20d)],_0x5f1696);}},{'connection':redis_connection});console[a0_0x16a558(0x256)](a0_0x16a558(0x223)+a0_0x16a558(0x217)+a0_0x16a558(0x259)+a0_0x16a558(0x228)+new Date()[a0_0x16a558(0x236)+'g']());